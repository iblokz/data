#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ðŸ” Running pre-commit checks..."

# Run linter
echo "ðŸ“ Running linter..."
npm run lint || {
  echo "âŒ Linting failed. Please fix the errors above."
  exit 1
}

# Run tests
echo "ðŸ§ª Running tests..."
npm test || {
  echo "âŒ Tests failed. Please fix the failing tests."
  exit 1
}

# Generate documentation
echo "ðŸ“š Generating documentation..."
npm run docs || {
  echo "âŒ Documentation generation failed."
  exit 1
}

# Check if docs changed and stage them
if ! git diff --quiet API.md 2>/dev/null; then
  echo "ðŸ“„ API.md was updated, adding to commit..."
  git add API.md
fi

echo "âœ… Pre-commit checks passed!"

